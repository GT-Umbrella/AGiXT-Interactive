"use strict";(self.webpackChunk_agixt_interactive=self.webpackChunk_agixt_interactive||[]).push([[367],{"./components/Chat/Message/MarkdownBlock.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>MarkdownBlock});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react_markdown=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/react-markdown/lib/react-markdown.js")),CodeBlock=__webpack_require__("./components/Chat/Message/Markdown/CodeBlock.tsx"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js");function renderHeading(Tag,children){let text="";children&&children[0]&&(text=children[0]);const id=function generateId(text){return text?text.toLowerCase().replace(/\W+/g,"-"):""}(text);return(0,jsx_runtime.jsx)(Typography.A,{component:Tag,variant:Tag,id,children})}renderHeading.__docgenInfo={description:"",methods:[],displayName:"renderHeading"};var Link=__webpack_require__("./node_modules/@mui/material/Link/Link.js");const handleAnchorClick=e=>{const href=e.target.getAttribute("href");if(href.startsWith("#")){e.preventDefault();const id=href.slice(1),element=document.getElementById(id);element&&element.scrollIntoView({behavior:"smooth"})}};function renderLink(param){let{children,...props}=param;const isExternal=props.href&&!props.href.startsWith("#");return(0,jsx_runtime.jsx)(Link.A,{...props,target:isExternal?"_blank":void 0,rel:isExternal?"noopener noreferrer":void 0,onClick:isExternal?void 0:handleAnchorClick,children})}function renderList(param){let{children,ordered=!0}=param;return ordered?(0,jsx_runtime.jsx)("ol",{children}):(0,jsx_runtime.jsx)("ul",{children})}function renderListItem(param){let{children}=param;return(0,jsx_runtime.jsx)("li",{style:{marginLeft:"1.2rem",marginBottom:"0.3rem"},children})}renderLink.__docgenInfo={description:"",methods:[],displayName:"renderLink"},renderList.__docgenInfo={description:"",methods:[],displayName:"renderList",props:{ordered:{defaultValue:{value:"true",computed:!1},required:!1}}},renderListItem.__docgenInfo={description:"",methods:[],displayName:"renderListItem"};var console=__webpack_require__("./node_modules/console-browserify/index.js");function MarkdownBlock(param){let{content,chatItem,setLoading}=param;const renderMessage=()=>{let message=content.toString();const matches=[...message.matchAll(/\\```(.|\n)*```/g)];if(console.log(matches),matches.length>0)return matches.forEach((match=>{console.log(match),message=message.replace(match[0],match[0].replaceAll("\\```","´´´").replaceAll("```","´´´").replaceAll("\n","\n\n")),console.log(message)})),message;if(message.includes("<audio controls><source src=")){const match=message.match(/<audio controls><source src="(.*)" type="audio\/wav"><\/audio>/);return message.replace(match[0],"")}return content},timestamp=chatItem?chatItem.timestamp.replace(/ /g,"-").replace(/:/g,"-").replace(/,/g,""):(new Date).toLocaleString().replace(/\D/g,""),fileName=chatItem?"".concat(chatItem.role,"-").concat(timestamp):"".concat(timestamp);return content.includes("```csv")?renderMessage():(0,jsx_runtime.jsx)(react_markdown.$,{className:"react-markdown",components:{a:renderLink,h1(param){let{children}=param;return renderHeading("h1",children)},h2(param){let{children}=param;return renderHeading("h2",children)},h3(param){let{children}=param;return renderHeading("h3",children)},h4(param){let{children}=param;return renderHeading("h4",children)},ol:renderList,li:renderListItem,code:props=>(0,CodeBlock.A)({...props,fileName,setLoading})},children:renderMessage().toString()})}MarkdownBlock.__docgenInfo={description:"",methods:[],displayName:"MarkdownBlock",props:{content:{required:!0,tsType:{name:"string"},description:""},chatItem:{required:!1,tsType:{name:"signature",type:"object",raw:"{ role: string; timestamp: string; message: string }",signature:{properties:[{key:"role",value:{name:"string",required:!0}},{key:"timestamp",value:{name:"string",required:!0}},{key:"message",value:{name:"string",required:!0}}]}},description:""},setLoading:{required:!1,tsType:{name:"signature",type:"function",raw:"(loading: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"loading"}],return:{name:"void"}}},description:""}}}},"./components/Chat/Message/Markdown/CodeBlock.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CodeBlock});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),ContentCopy=__webpack_require__("./node_modules/@mui/icons-material/esm/ContentCopy.js"),Download=__webpack_require__("./node_modules/@mui/icons-material/esm/Download.js"),useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Tabs=__webpack_require__("./node_modules/@mui/material/Tabs/Tabs.js"),Tab=__webpack_require__("./node_modules/@mui/material/Tab/Tab.js"),IconButton=__webpack_require__("./node_modules/@mui/material/IconButton/IconButton.js"),clipboard_copy=__webpack_require__("./node_modules/clipboard-copy/index.js"),clipboard_copy_default=__webpack_require__.n(clipboard_copy),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),default_highlight=__webpack_require__("./node_modules/react-syntax-highlighter/dist/esm/default-highlight.js"),hljs=__webpack_require__("./node_modules/react-syntax-highlighter/dist/cjs/styles/hljs/index.js"),TabPanel=__webpack_require__("./node_modules/jrgcomponents/dist/Tabs/TabPanel.js"),TabPanel_default=__webpack_require__.n(TabPanel),MarkdownBlock=__webpack_require__("./components/Chat/Message/MarkdownBlock.tsx"),DataGrid=__webpack_require__("./node_modules/@mui/x-data-grid/DataGrid/DataGrid.js"),gridClasses=__webpack_require__("./node_modules/@mui/x-data-grid/constants/gridClasses.js"),GridToolbar=__webpack_require__("./node_modules/@mui/x-data-grid/components/toolbar/GridToolbar.js"),Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),Dialog=__webpack_require__("./node_modules/@mui/material/Dialog/Dialog.js"),DialogTitle=__webpack_require__("./node_modules/@mui/material/DialogTitle/DialogTitle.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/DialogContent/DialogContent.js"),TextField=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),DialogActions=__webpack_require__("./node_modules/@mui/material/DialogActions/DialogActions.js"),TipsAndUpdatesOutlined=__webpack_require__("./node_modules/@mui/icons-material/TipsAndUpdatesOutlined.js"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),colorManipulator=__webpack_require__("./node_modules/@mui/system/esm/colorManipulator.js"),InteractiveConfigContext=__webpack_require__("./types/InteractiveConfigContext.ts");const StripedDataGrid=(0,styled.Ay)(DataGrid.zh)((param=>{let{theme}=param;return{["& .".concat(gridClasses.x.row,".even")]:{backgroundColor:"dark"===theme.palette.mode?"#333":"#696a6b","&:hover, &.Mui-hovered":{backgroundColor:theme.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,colorManipulator.X4)(theme.palette.primary.main,Math.min(1,1+theme.palette.action.selectedOpacity)),"&:hover, &.Mui-hovered":{backgroundColor:(0,colorManipulator.X4)(theme.palette.primary.main,Math.min(1,1+theme.palette.action.selectedOpacity+theme.palette.action.hoverOpacity)),"@media (hover: none)":{backgroundColor:(0,colorManipulator.X4)(theme.palette.primary.main,Math.min(1,1+theme.palette.action.selectedOpacity))}}}}}})),DataGridFromCSV=param=>{let{csvData,setLoading}=param;const[open,setOpen]=(0,react.useState)(!1),[userMessage,setUserMessage]=(0,react.useState)("Surprise me!"),[rows,setRows]=(0,react.useState)([]),[error,setError]=(0,react.useState)(""),[filteredRows,setFilteredRows]=(0,react.useState)([]),[filteredColumns,setFilteredColumns]=(0,react.useState)([]),[columns,setColumns]=(0,react.useState)([]);(0,react.useEffect)((()=>{setError("");const rawData=csvData.map((row=>row.split(",").map((cell=>cell.trim().replaceAll('"',"")))));rawData.every((row=>row.length===rawData[0].length))&&rawData[0]&&!rawData.some((row=>[0,1].includes(row.length)))?(setColumns((rawData[0][0].toLowerCase().includes("id")?rawData[0].slice(1):rawData[0]).map((header=>({field:header,width:Math.max(160,10*header.length),flex:1,resizeable:!0,headerName:header,sx:{"& .MuiDataGrid-cell":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}})))),setRows(rawData.slice(1).map(((row,index)=>rawData[0][0].toLowerCase().includes("id")?{id:row[0],...Object.fromEntries(row.slice(1).map(((cell,index)=>[rawData[0][index+1],cell])))}:{id:index,...Object.fromEntries(row.map(((cell,index)=>[rawData[0][index.toString()],cell])))})))):setError("CSV data is not valid.")}),[csvData]);const context=(0,react.useContext)(InteractiveConfigContext.k);(0,react.useEffect)((()=>{setFilteredRows(rows)}),[rows]),(0,react.useEffect)((()=>{setFilteredColumns(columns)}),[columns]);return rows.length>1?(0,jsx_runtime.jsx)(Box.A,{display:"flex",flexDirection:"column",gap:"1rem",children:error?(0,jsx_runtime.jsx)(Typography.A,{color:"error",children:error}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StripedDataGrid,{density:"compact",rows,columns,components:{Toolbar:GridToolbar.O},pageSizeOptions:[5,10,20],initialState:{pagination:{paginationModel:{pageSize:5}}},getRowClassName:params=>params.indexRelativeToCurrentPage%2==0?"even":"odd",onStateChange:state=>{setFilteredRows(rows.filter((row=>Object.keys(state.filter.filteredRowsLookup).filter((key=>state.filter.filteredRowsLookup[key.toString()])).includes(row.id)))),setFilteredColumns(columns.filter((column=>!Object.keys(state.columns.columnVisibilityModel).filter((key=>!state.columns.columnVisibilityModel[key.toString()])).includes(column.field))))}}),setLoading&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex"},children:(0,jsx_runtime.jsxs)(Button.A,{color:"info",variant:"outlined",onClick:()=>{setOpen(!0)},children:[(0,jsx_runtime.jsx)(TipsAndUpdatesOutlined.A,{}),"Get Insights"]})}),(0,jsx_runtime.jsxs)(Dialog.A,{open,onClose:()=>{setOpen(!1)},children:[(0,jsx_runtime.jsx)(DialogTitle.A,{children:"Get Insights"}),(0,jsx_runtime.jsx)(DialogContent.A,{children:(0,jsx_runtime.jsx)(TextField.A,{margin:"dense",id:"name",label:"What would you like insights on?",fullWidth:!0,value:userMessage,onChange:event=>{setUserMessage(event.target.value)},onClick:e=>{"Surprise me!"===e.target.value&&setUserMessage("")},variant:"outlined",color:"info"})}),(0,jsx_runtime.jsxs)(DialogActions.A,{children:[(0,jsx_runtime.jsx)(Button.A,{color:"error",onClick:()=>{setOpen(!1)},children:"Cancel"}),(0,jsx_runtime.jsx)(Button.A,{color:"info",onClick:()=>{(async userMessage=>{setLoading(!0);const stringifiedColumns=filteredColumns.map((header=>header.field)),stringifiedRows=filteredRows.map((row=>[row.id,...filteredColumns.map((header=>row[header.field]))].join(",")));await context.agixt.runChain("Data Analysis",userMessage,context.agent,!1,1,{conversation_name:context.overrides.conversationName,text:[["id",...stringifiedColumns].join(","),...stringifiedRows].join("\n")}),setLoading(!1)})(userMessage),setOpen(!1)},children:"Get Insights"})]})]})]})]})}):csvData},CSV=DataGridFromCSV;DataGridFromCSV.__docgenInfo={description:"",methods:[],displayName:"DataGridFromCSV",props:{csvData:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setLoading:{required:!1,tsType:{name:"signature",type:"function",raw:"(loading: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"loading"}],return:{name:"void"}}},description:""}}};var console=__webpack_require__("./node_modules/console-browserify/index.js");const fileExtensions={"":"txt",text:"txt",python:"py",javascript:"js",typescript:"ts",html:"html",css:"css",json:"json",yaml:"yaml",markdown:"md",shell:"sh",bash:"sh",sql:"sql",java:"java",c:"c",cpp:"cpp",csharp:"cs",go:"go",rust:"rs",php:"php",ruby:"rb",perl:"pl",lua:"lua",r:"r",swift:"swift",kotlin:"kt",scala:"scala",clojure:"clj",elixir:"ex",erlang:"erl",haskell:"hs",ocaml:"ml",pascal:"pas",scheme:"scm",coffeescript:"coffee",fortran:"f",julia:"jl",lisp:"lisp",prolog:"pro",vbnet:"vb",dart:"dart",fsharp:"fs",groovy:"groovy",perl6:"pl",powershell:"ps1",puppet:"pp",qml:"qml",racket:"rkt",sas:"sas",verilog:"v",vhdl:"vhd",apex:"cls",matlab:"m",nim:"nim",csv:"csv"},languageRenders={markdown:content=>(0,jsx_runtime.jsx)(MarkdownBlock.A,{content}),csv:(content,setLoading)=>(0,jsx_runtime.jsx)(CSV,{csvData:content.split("\n"),setLoading})};function CodeBlock(param){let{inline=!1,children,className,fileName,setLoading,...props}=param;const theme=(0,useTheme.A)();if(inline)return(0,jsx_runtime.jsx)(Typography.A,{component:"span",sx:{backgroundColor:theme.palette.divider,borderRadius:"0.5rem",padding:"0.1rem 0.25rem",fontFamily:"monospace"},children});const codeBlockRef=react.useRef(null),language=(null==className?void 0:className.replace(/language-/,""))||"Text",fileNameWithExtension="".concat(fileName||"code",".").concat(fileExtensions[String(language.toLowerCase())]||"txt"),[tab,setTab]=react.useState(0);return console.log("dark"===theme.palette.mode?hljs.VI.hljs.background:hljs.jK.hljs.background),console.log(hljs.jK),console.log(hljs.VI),(0,jsx_runtime.jsxs)(Box.A,{pr:"1rem",my:"0.5rem",children:[(0,jsx_runtime.jsxs)(Box.A,{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",sx:{backgroundColor:"dark"===theme.palette.mode?hljs.VI.hljs.background:hljs.jK.hljs.background},children:[Object.keys(languageRenders).includes(language)&&(0,jsx_runtime.jsxs)(Tabs.A,{value:tab,onChange:(event,newValue)=>setTab(newValue),children:[Object.keys(languageRenders).includes(language)&&(0,jsx_runtime.jsx)(Tab.A,{label:"Rendered"}),(0,jsx_runtime.jsx)(Tab.A,{label:"Source"})]}),(0,jsx_runtime.jsxs)(Box.A,{children:[(0,jsx_runtime.jsx)(IconButton.A,{onClick:()=>{if(console.log(codeBlockRef.current),codeBlockRef.current){const actualCode=codeBlockRef.current.querySelector("code").cloneNode(!0);for(const lineNumber of actualCode.querySelectorAll(".react-syntax-highlighter-line-number"))lineNumber.remove();console.log(actualCode.innerText),clipboard_copy_default()(actualCode.innerText),actualCode.remove()}},children:(0,jsx_runtime.jsx)(ContentCopy.A,{})}),(0,jsx_runtime.jsx)(IconButton.A,{onClick:()=>{if(console.log(codeBlockRef.current),codeBlockRef.current){const actualCode=codeBlockRef.current.querySelector("code").cloneNode(!0);for(const lineNumber of actualCode.querySelectorAll(".react-syntax-highlighter-line-number"))lineNumber.remove();console.log(actualCode.innerText);const element=document.createElement("a"),file=new Blob([actualCode.innerText],{type:"text/plain;charset=utf-8"});element.href=URL.createObjectURL(file),element.download=fileNameWithExtension,document.body.appendChild(element),element.click(),actualCode.remove()}},children:(0,jsx_runtime.jsx)(Download.A,{})}),fileNameWithExtension," | ",language]})]}),Object.keys(languageRenders).includes(language)&&(0,jsx_runtime.jsx)(TabPanel_default(),{value:tab,index:0,className:"code-block",children:(0,jsx_runtime.jsx)(Box.A,{className:"code-container",children:languageRenders[language.toString()](children,setLoading)})}),(0,jsx_runtime.jsx)(TabPanel_default(),{value:tab,index:Object.keys(languageRenders).includes(language)?1:0,className:"code-block",children:(0,jsx_runtime.jsx)(Box.A,{className:"code-container",ref:codeBlockRef,children:language.toLowerCase()in fileExtensions?(0,jsx_runtime.jsx)(default_highlight.A,{...props,children,language:language.toLowerCase(),PreTag:"div",style:"dark"===theme.palette.mode?hljs.VI:hljs.jK,showLineNumbers:!0,wrapLongLines:!0}):(0,jsx_runtime.jsx)("code",{className:"code-block",...props,children})})})]})}CodeBlock.__docgenInfo={description:"",methods:[],displayName:"CodeBlock",props:{inline:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""},fileName:{required:!1,tsType:{name:"string"},description:""},setLoading:{required:!1,tsType:{name:"signature",type:"function",raw:"(loading: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"loading"}],return:{name:"void"}}},description:""}}}},"./types/InteractiveConfigContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>InteractiveConfigContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const ConfigDefault=__webpack_require__("./types/InteractiveConfigDefault.js"),InteractiveConfigContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(ConfigDefault)},"./types/InteractiveConfigDefault.js":module=>{const InteractiveConfigDefault={agent:"gpt4free",agixt:null,openai:null,overrides:{mode:"prompt",prompt:void 0,promptCategory:"Default",command:"",commandArgs:{},commandMessageArg:"message",chain:"",chainRunConfig:{chainArgs:{},singleStep:!1,fromStep:0,allResponses:!1},contextResults:0,shots:0,websearchDepth:0,injectMemoriesFromCollectionNumber:0,conversationResults:5,conversationName:(new Date).toLocaleDateString("en-CA"),browseLinks:!1,webSearch:!1,insightAgentName:"",enableMemory:!1},mutate:null};module.exports=InteractiveConfigDefault}}]);